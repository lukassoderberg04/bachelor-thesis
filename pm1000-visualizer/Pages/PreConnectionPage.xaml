<UserControl x:Class="pm1000_visualizer.Pages.PreConnectionPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#FF28292B">
    <Grid>
        <Border Background="#FF333436"
                BorderBrush="#FF555555"
                BorderThickness="1"
                CornerRadius="8"
                Padding="35"
                MaxWidth="480"
                MaxHeight="850"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <StackPanel>
                <!-- Title -->
                <TextBlock Text="PM1000 Visualizer"
                           FontSize="26"
                           Foreground="White"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,5"/>
                <TextBlock Text="Pre-Connection Setup"
                           FontSize="13"
                           Foreground="#FFAAAAAA"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,25"/>

                <!-- ── Connection ───────────────────────────── -->
                <TextBlock Text="CONNECTION"
                           Foreground="#FF4A90D9"
                           FontWeight="Bold"
                           FontSize="11"
                           Margin="0,0,0,8"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="140"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Streamer IP"
                               Grid.Row="0"
                               Foreground="#FFCCCCCC"
                               VerticalAlignment="Center"
                               Margin="0,0,0,6"/>
                    <TextBox   x:Name="IpBox"
                               Grid.Row="0"
                               Grid.Column="1"
                               Text="127.0.0.1"
                               Style="{StaticResource DarkTextBox}"
                               Margin="0,0,0,6"/>
                </Grid>

                <!-- ── UDP Ports ────────────────────────────── -->
                <TextBlock Text="UDP PORTS"
                           Foreground="#FF4A90D9"
                           FontWeight="Bold"
                           FontSize="11"
                           Margin="0,15,0,8"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="140"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Stokes"
                               Grid.Row="0"
                               Foreground="#FFCCCCCC"
                               VerticalAlignment="Center"
                               Margin="0,0,0,6"/>
                    <TextBox   x:Name="StokesPortBox"
                               Grid.Row="0"
                               Grid.Column="1"
                               Text="5000"
                               Style="{StaticResource DarkTextBox}"
                               Margin="0,0,0,6"/>

                    <TextBlock Text="Raw Audio"
                               Grid.Row="1"
                               Foreground="#FFCCCCCC"
                               VerticalAlignment="Center"
                               Margin="0,0,0,6"/>
                    <TextBox   x:Name="RawPortBox"
                               Grid.Row="1"
                               Grid.Column="1"
                               Text="5001"
                               Style="{StaticResource DarkTextBox}"
                               Margin="0,0,0,6"/>

                    <TextBlock Text="Processed Audio"
                               Grid.Row="2"
                               Foreground="#FFCCCCCC"
                               VerticalAlignment="Center"
                               Margin="0,0,0,6"/>
                    <TextBox   x:Name="ProcPortBox"
                               Grid.Row="2"
                               Grid.Column="1"
                               Text="5002"
                               Style="{StaticResource DarkTextBox}"
                               Margin="0,0,0,6"/>
                </Grid>

                <!-- ── Duration ─────────────────────────────── -->
                <TextBlock Text="MEASUREMENT DURATION"
                           Foreground="#FF4A90D9"
                           FontWeight="Bold"
                           FontSize="11"
                           Margin="0,15,0,8"/>

                <RadioButton x:Name="IndefiniteRadio"
                             Content="Indefinite"
                             IsChecked="True"
                             GroupName="Duration"
                             Style="{StaticResource DarkRadioButton}"
                             Margin="0,0,0,6"/>

                <StackPanel Orientation="Horizontal">
                    <RadioButton x:Name="FixedRadio"
                                 Content="Fixed:"
                                 GroupName="Duration"
                                 Style="{StaticResource DarkRadioButton}"/>
                    <TextBox x:Name="DurationBox"
                             Text="30"
                             Width="55"
                             Style="{StaticResource DarkTextBox}"
                             Margin="8,0,6,0"/>
                    <TextBlock Text="seconds"
                               Foreground="#FFAAAAAA"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <!-- ── Test mode ────────────────────────────── -->
                <TextBlock Text="TEST MODE"
                           Foreground="#FF4A90D9"
                           FontWeight="Bold"
                           FontSize="11"
                           Margin="0,20,0,8"/>

                <RadioButton x:Name="NoTestRadio"
                             Content="None (real device)"
                             IsChecked="True"
                             GroupName="TestMode"
                             Style="{StaticResource DarkRadioButton}"
                             Margin="0,0,0,6"/>

                <RadioButton x:Name="TestModeRadio"
                             Content="Synthetic Test (header+block packets)"
                             GroupName="TestMode"
                             Style="{StaticResource DarkRadioButton}"
                             Margin="0,0,0,6"/>

                <RadioButton x:Name="StressTestRadio"
                             Content="Stress Test (raw single-sample packets)"
                             GroupName="TestMode"
                             Style="{StaticResource DarkRadioButton}"
                             Checked="StressTestRadio_Changed"
                             Unchecked="StressTestRadio_Changed"
                             Margin="0,0,0,6"/>

                <!-- Stress test rate controls (visible only when stress test selected) -->
                <StackPanel x:Name="StressPanel"
                            Visibility="Collapsed"
                            Margin="20,4,0,0">
                    <TextBlock Foreground="#FFCCCCCC"
                               FontSize="12"
                               Margin="0,0,0,4">
                        <Run Text="Stokes rate: "/>
                        <Run x:Name="StokesRateLabel"
                                Text="1000"/>
                        <Run Text=" packets/sec"/>
                    </TextBlock>
                    <Slider x:Name="StokesRateSlider"
                            Minimum="100"
                            Maximum="20000"
                            Value="1000"
                            TickFrequency="100"
                            IsSnapToTickEnabled="True"
                            ValueChanged="StokesRateSlider_Changed"
                            Margin="0,0,0,8"/>

                    <TextBlock Foreground="#FFCCCCCC"
                               FontSize="12"
                               Margin="0,0,0,4">
                        <Run Text="Audio rate: "/>
                        <Run x:Name="AudioRateLabel"
                                Text="16000"/>
                        <Run Text=" packets/sec"/>
                    </TextBlock>
                    <Slider x:Name="AudioRateSlider"
                            Minimum="1000"
                            Maximum="48000"
                            Value="16000"
                            TickFrequency="1000"
                            IsSnapToTickEnabled="True"
                            ValueChanged="AudioRateSlider_Changed"
                            Margin="0,0,0,4"/>
                </StackPanel>

                <!-- ── Connect button ───────────────────────── -->
                <Button Content="Connect"
                        Style="{StaticResource AccentButton}"
                        FontSize="15"
                        Padding="0,10"
                        Margin="0,25,0,0"
                        Click="Connect_Click"/>

                <TextBlock x:Name="ErrorText"
                           Foreground="#FFE74C3C"
                           FontSize="12"
                           TextWrapping="Wrap"
                           Margin="0,10,0,0"
                           Visibility="Collapsed"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
